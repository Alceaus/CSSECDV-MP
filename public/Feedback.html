<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Gala</title>
    <link rel="stylesheet" href="css/LOGIN-OUT.css">
    <link rel="stylesheet" href="css/Feedback.css">
    <link rel="stylesheet" href="css/donate-popup.css">
    <link rel="stylesheet" href="css/iframe.css">
    <style>
        .feedback-form {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-group {
            margin-bottom: 15px;
        }
        .feedback-display {
            margin-top: 30px;
        }
        .feedback-entry {
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <header>
        <a href="home-default.html">
            <img src="images/gala-logo.png" alt="Project GALA Logo" class="logo">
        </a>
        <button class="donate-button" onclick="showDonateModal()">DONATE NOW</button>
    </header>

    <div id="donateModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeDonateModal()">&times;</span>
            <h2>Select Donation Method</h2>
            <div class="modal-buttons">
                <div class="donation-option" onclick="showImage('bank')">
                    <img src="images/Donation/Bank.png" alt="Bank Image" class="donation-image">
                    <div class="modal-label">Bank</div>
                </div>
                <div class="donation-option" onclick="showImage('gcash')">
                    <img src="images/Donation/G-Cash.png" alt="Gcash Image" class="donation-image">
                    <div class="modal-label">Gcash</div>
                </div>
            </div>
            <img id="donationImage" src="" alt="Donation Image" style="display: none; margin-top: 20px; width: 100%;">
        </div>
    </div>

    <nav>
        <ul>
            <li class="dropdown">
                <a href="#" data-arrow> ABOUT US</a>
                <div class="dropdown-content about-us-dropdown">
                    <a href="Mission_Vision_Purpose.html">MISSION, VISION & PURPOSE</a>
                    <a href="Our_Journey.html">JOURNEY</a>
                    <a href="Founders.html">FOUNDERS</a>
                </div>
            </li>
            
            <li class="dropdown">
                <a href="#" data-arrow> REPORTS AND PUBLICATIONS</a>
                <div class="dropdown-content reports-dropdown"> 
                    <a href="featured-stories_user.html">FEATURED STORIES</a>
                    <a href="multimedia-resources.html">MULTIMEDIA RESOURCES</a>
                </div>
            </li>
            <li class="dropdown">
                <a href="#" data-arrow> CONTACT</a>
                <div class="dropdown-content contact-dropdown"> 
                    <a href="Contact-us_user.html">CONTACT US</a>
                    <a href="get-in-touch.html">GET IN TOUCH</a>
                    <a href="partner-with-us.html">PARTNER WITH US</a>
                    <a href="volunteer-with-us.html">VOLUNTEER WITH US</a>
                </div>
            </li>
            <li class="dropdown">
                <a href="Feedback.html" data-arrow> FEEDBACK</a>
            </li>  
            <li id="account-link" class="dropdown">
                <!-- Placeholder content to be replaced by JavaScript -->
            </li>
        </ul>
    </nav>

    <iframe src="chatbot.html" class="popup-iframe"></iframe>
    
    <div class="background-container">
        <div class="main-container">
            <div class="testimonials">
                <h2>What Clients Say</h2>
                <p>We place huge value on strong relationships and have seen the benefit they bring to our business. Customer feedback is vital in helping us to get it right.</p>
                
                <!-- New Feedback Form -->
                <div class="feedback-form">
                    <form id="feedbackForm">
                        <div class="input-group">
                            <label for="feedbackText">Your Feedback:</label>
                            <input type="text" 
                                   id="feedbackText" 
                                   name="feedbackText" 
                                   required 
                                   placeholder="Share your experience">
                        </div>
                        
                        <div class="input-group">
                            <label for="rating">Rating (1-10):</label>
                            <input type="number" 
                                   id="rating" 
                                   name="rating" 
                                   min="1" 
                                   max="10" 
                                   required 
                                   placeholder="Enter a rating from 1 to 10">
                        </div>
                        
                        <div class="input-group">
                            <label for="satisfactionScore">Satisfaction Score (1-100):</label>
                            <input type="number" 
                                   id="satisfactionScore" 
                                   name="satisfactionScore" 
                                   min="1" 
                                   max="100" 
                                   required 
                                   placeholder="Enter a score from 1 to 100">
                        </div>

                        <button type="submit" class="feedback-btn">Submit Feedback</button>
                    </form>

                    
                </div>

                <div class="testimonial-container">
                    
                        <div class="testimonial-card" id="feedbackEntries" >
                            
                        </div>
                       
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <img src="images/logo.png" alt="Footer Logo" class="footer-logo">
            <div class="footer-description">
                <p>Project G.A.L.A. (Give A Love Anywhere) is a private, non-profit, non-partisan, and non-government organization that strongly advocates for an inclusive society through transformative education.</p>
            </div>
            <div class="footer-links">
                <div class="about-us-section">
                    <h3>About Us</h3>
                    <ul>
                        <li><a href="../public/Mission_Vision_Purpose.html">Mission, Vision, & Purpose</a></li>
                        <li><a href="../public/Our_Journey.html">Journey</a></li>
                        <li><a href="../public/Founders.html">Founders</a></li>
                        <li><a href="../public/TermsAndConditions.html">Terms and Conditions</a></li>
                    </ul>
                </div>
                <div class="contact-section">
                    <h3>Contact Us</h3>
                    <p>For more immediate concerns, you may reach us at:<br><br></p>
                    <p><strong>Email Address:</strong> project.gala.2017@gmail.com</p>
                    <p><strong>Contact Number:</strong><br> 0939 752 7749</p>
                </div>                
                <div class="follow-connect">
                    <h3>Connect With Us</h3>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/GAlAProject"><img src="images/facebook.png" alt="Facebook"></a>
                    </div>                
                </div>
            </div>
        </div>        
        <div class="footer-bottom">
            <p>&copy; 2024 Project GALA. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        document.getElementById('feedbackForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                textInput: document.getElementById('feedbackText').value,
                numericInput1: document.getElementById('rating').value,
                numericInput2: document.getElementById('satisfactionScore').value
            };

            try {
                const response = await fetch('/api/save-inputs', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (response.ok) {
                    loadFeedback();
                    e.target.reset();
                    alert('Feedback submitted successfully!');
                } else {
                    console.error('Server Error:', data);
                    alert('Error saving feedback: ' + (data.message || 'Unknown error occurred'));
                }
            } catch (err) {
                console.error('Error:', err);
                alert('Error saving feedback. Please try again.');
            }
        });

        async function loadFeedback() {
    try {
        const response = await fetch('/api/get-inputs');
        const data = await response.json();
        const displayArea = document.getElementById('feedbackEntries');
        
        displayArea.style.display = 'flex'; // Make the container flex
        displayArea.style.overflowX = 'auto'; // Enable horizontal scrolling
        displayArea.style.gap = '20px'; // Add space between cards
        
        displayArea.innerHTML = data.map(item => `
            <div class="feedback-entry" style="flex: 0 0 auto; min-width: 300px;">
                <p><strong>Feedback:</strong> ${item.text_input}</p>
                <p><strong>Rating:</strong> ${item.numeric_input1}/10</p>
                <p><strong>Satisfaction Score:</strong> ${item.numeric_input2}/100</p>
                <p><small>Submitted: ${new Date(item.created_at).toLocaleString()}</small></p>
            </div>
        `).join('');
    } catch (err) {
        console.error('Error:', err);
    }
}


        // Load feedback when page loads
        loadFeedback();
    </script>
    <script src="js/Feedback.js"></script>
    <script src="js/donate-popup.js"></script>
</body>
</html>
